{% extends 'bond_checker/base.html' %}

{% block title %}ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§ - OCRãƒ»ç”»åƒèªè¨¼ ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯{% endblock %}

{% block content %}
<div class="mb-3">
    <a href="{% url 'bond_checker:index' %}" class="btn btn-outline-secondary">
        â† ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
    </a>
</div>

<div class="upload-area">
    <h2 class="mb-4">ğŸ“š ã™ã¹ã¦ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h2>
    
    {% if documents %}
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>ãƒ•ã‚¡ã‚¤ãƒ«å</th>
                        <th>ã‚¿ã‚¤ãƒ—</th>
                        <th>ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ—¥æ™‚</th>
                        <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for doc in documents %}
                    <tr>
                        <td>{{ doc.file_name }}</td>
                        <td>
                            {% if doc.file_type == 'pdf' %}
                                ğŸ“„ PDF
                            {% else %}
                                ğŸ–¼ï¸ ç”»åƒ
                            {% endif %}
                        </td>
                        <td>{{ doc.uploaded_at|date:"Yå¹´mæœˆdæ—¥ H:i" }}</td>
                        <td>
                            {% if doc.analysis_status == 'completed' %}
                                <span class="status-badge status-completed">âœ“ å®Œäº†</span>
                            {% elif doc.analysis_status == 'processing' %}
                                <span class="status-badge status-processing">â³ å‡¦ç†ä¸­</span>
                            {% elif doc.analysis_status == 'failed' %}
                                <span class="status-badge status-failed">âœ— å¤±æ•—</span>
                            {% else %}
                                <span class="status-badge status-pending">å¾…æ©Ÿä¸­</span>
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'bond_checker:detail' doc.pk %}" class="btn btn-sm btn-outline-primary">
                                è©³ç´°ã‚’è¦‹ã‚‹
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="alert alert-info">
            ã¾ã ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
        </div>
    {% endif %}
</div>
{% endblock %}
