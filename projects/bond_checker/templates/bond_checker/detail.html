{% extends 'bond_checker/base.html' %}

{% block title %}{{ bond_doc.file_name }} - Ë©≥Á¥∞{% endblock %}

{% block content %}
<div class="mb-3">
    <a href="{% url 'bond_checker:index' %}" class="btn btn-outline-secondary">
        ‚Üê „Éõ„Éº„É†„Å´Êàª„Çã
    </a>
</div>

<div class="upload-area">
    <h2 class="mb-4">üìÑ „Éâ„Ç≠„É•„É°„É≥„ÉàË©≥Á¥∞</h2>
    
    <div class="row mb-4">
        <div class="col-md-6">
            <h5>„Éï„Ç°„Ç§„É´ÊÉÖÂ†±</h5>
            <table class="table table-borderless">
                <tr>
                    <th width="120">„Éï„Ç°„Ç§„É´Âêç:</th>
                    <td>{{ bond_doc.file_name }}</td>
                </tr>
                <tr>
                    <th>„Éï„Ç°„Ç§„É´„Çø„Ç§„Éó:</th>
                    <td>
                        {% if bond_doc.file_type == 'pdf' %}
                            üìÑ PDF
                        {% else %}
                            üñºÔ∏è ÁîªÂÉè
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>„Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÊó•ÊôÇ:</th>
                    <td>{{ bond_doc.uploaded_at|date:"YÂπ¥mÊúàdÊó• H:i:s" }}</td>
                </tr>
                <tr>
                    <th>Ëß£ÊûêÁä∂Ê≥Å:</th>
                    <td>
                        {% if bond_doc.analysis_status == 'completed' %}
                            <span class="status-badge status-completed">‚úì ÂÆå‰∫Ü</span>
                        {% elif bond_doc.analysis_status == 'processing' %}
                            <span class="status-badge status-processing">‚è≥ Âá¶ÁêÜ‰∏≠</span>
                        {% elif bond_doc.analysis_status == 'failed' %}
                            <span class="status-badge status-failed">‚úó Â§±Êïó</span>
                        {% else %}
                            <span class="status-badge status-pending">ÂæÖÊ©ü‰∏≠</span>
                        {% endif %}
                    </td>
                </tr>
                {% if bond_doc.analyzed_at %}
                <tr>
                    <th>Ëß£ÊûêÂÆå‰∫ÜÊó•ÊôÇ:</th>
                    <td>{{ bond_doc.analyzed_at|date:"YÂπ¥mÊúàdÊó• H:i:s" }}</td>
                </tr>
                {% endif %}
            </table>
        </div>
    </div>

    {% if bond_doc.analysis_status == 'completed' %}
    
    <!-- Âá¶ÁêÜÊôÇÈñì„ÅÆÊØîËºÉ -->
    <div class="mt-4">
        <h5>‚è±Ô∏è Âá¶ÁêÜÊôÇÈñì„ÅÆÊØîËºÉ</h5>
        <div class="row">
            <div class="col-md-2">
                <div class="card">
                    <div class="card-body text-center">
                        <h6 style="font-size: 0.9rem;">{% if bond_doc.file_type == 'pdf' %}pdfplumber{% else %}Tesseract OCR{% endif %}</h6>
                        {% if bond_doc.ocr_processing_time %}
                            <h4 class="text-primary">{{ bond_doc.ocr_processing_time|floatformat:2 }}Áßí</h4>
                            <span class="status-badge status-{{ bond_doc.ocr_status }}">{{ bond_doc.ocr_status }}</span>
                        {% else %}
                            <p class="text-muted">Êú™ÂÆüË°å</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card">
                    <div class="card-body text-center">
                        <h6 style="font-size: 0.9rem;">GPT-4o</h6>
                        {% if bond_doc.gpt4o_processing_time %}
                            <h4 class="text-info">{{ bond_doc.gpt4o_processing_time|floatformat:2 }}Áßí</h4>
                            <span class="status-badge status-{{ bond_doc.gpt4o_status }}">{{ bond_doc.gpt4o_status }}</span>
                        {% else %}
                            <p class="text-muted">Êú™ÂÆüË°å</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card">
                    <div class="card-body text-center">
                        <h6 style="font-size: 0.9rem;">GPT-4-turbo</h6>
                        {% if bond_doc.gpt35_processing_time %}
                            <h4 class="text-info">{{ bond_doc.gpt35_processing_time|floatformat:2 }}Áßí</h4>
                            <span class="status-badge status-{{ bond_doc.gpt35_status }}">{{ bond_doc.gpt35_status }}</span>
                        {% else %}
                            <p class="text-muted">Êú™ÂÆüË°å</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card">
                    <div class="card-body text-center">
                        <h6 style="font-size: 0.9rem;">Gemini 2.0 Flash Exp</h6>
                        {% if bond_doc.gemini_processing_time %}
                            <h4 class="text-success">{{ bond_doc.gemini_processing_time|floatformat:2 }}Áßí</h4>
                            <span class="status-badge status-{{ bond_doc.gemini_status }}">{{ bond_doc.gemini_status }}</span>
                        {% else %}
                            <p class="text-muted">Êú™ÂÆüË°å</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="card">
                    <div class="card-body text-center">
                        <h6 style="font-size: 0.9rem;">Claude 3 Opus</h6>
                        {% if bond_doc.claude_processing_time %}
                            <h4 class="text-warning">{{ bond_doc.claude_processing_time|floatformat:2 }}Áßí</h4>
                            <span class="status-badge status-{{ bond_doc.claude_status }}">{{ bond_doc.claude_status }}</span>
                        {% else %}
                            <p class="text-muted">Êú™ÂÆüË°å</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- „Çø„Éñ„ÅßÂàá„ÇäÊõø„ÅàÂèØËÉΩ„Å™ÁµêÊûúË°®Á§∫ -->
    <div class="mt-4">
        <h5>üìä Ë™çË≠òÁµêÊûú„ÅÆÊØîËºÉ</h5>
        <ul class="nav nav-tabs" id="resultTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="ocr-tab" data-bs-toggle="tab" data-bs-target="#ocr" type="button" role="tab">
                    {% if bond_doc.file_type == 'pdf' %}üìÑ pdfplumber{% else %}üî§ Tesseract OCR{% endif %}
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="gpt4o-tab" data-bs-toggle="tab" data-bs-target="#gpt4o" type="button" role="tab">
                    ü§ñ GPT-4o
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="gpt35-tab" data-bs-toggle="tab" data-bs-target="#gpt35" type="button" role="tab">
                    üí¨ GPT-4-turbo
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="gemini-tab" data-bs-toggle="tab" data-bs-target="#gemini" type="button" role="tab">
                    ‚ú® Gemini 2.0 Flash Exp
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="claude-tab" data-bs-toggle="tab" data-bs-target="#claude" type="button" role="tab">
                    üß† Claude 3 Opus
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="comparison-tab" data-bs-toggle="tab" data-bs-target="#comparison" type="button" role="tab">
                    üìà ÊØîËºÉÂàÜÊûê
                </button>
            </li>
        </ul>
        <div class="tab-content mt-3" id="resultTabsContent">
            <!-- OCRÁµêÊûú -->
            <div class="tab-pane fade show active" id="ocr" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">{% if bond_doc.file_type == 'pdf' %}pdfplumber{% else %}Tesseract OCR{% endif %} ÊäΩÂá∫ÁµêÊûú</h6>
                    </div>
                    <div class="card-body" style="background-color: #f8f9fa;">
                        {% if bond_doc.ocr_result %}
                            <div class="mb-2">
                                <strong>ÊñáÂ≠óÊï∞:</strong> {{ bond_doc.ocr_result|length }} ÊñáÂ≠ó
                            </div>
                            <pre style="white-space: pre-wrap; word-wrap: break-word; font-family: monospace; max-height: 500px; overflow-y: auto;">{{ bond_doc.ocr_result }}</pre>
                        {% elif bond_doc.ocr_error %}
                            <div class="alert alert-danger">
                                „Ç®„É©„Éº: {{ bond_doc.ocr_error }}
                            </div>
                        {% else %}
                            <p class="text-muted">ÁµêÊûú„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- GPT-4oÁµêÊûú -->
            <div class="tab-pane fade" id="gpt4o" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">GPT-4o Ëß£ÊûêÁµêÊûú</h6>
                    </div>
                    <div class="card-body" style="background-color: #f8f9fa;">
                        {% if bond_doc.gpt4o_result %}
                            <div class="mb-2">
                                <strong>ÊñáÂ≠óÊï∞:</strong> {{ bond_doc.gpt4o_result|length }} ÊñáÂ≠ó
                            </div>
                            {% if bond_doc.gpt4o_accuracy %}
                            <div class="mb-2">
                                <strong>ÈÅ©ÂêàÁéá:</strong> 
                                <span class="{% if bond_doc.gpt4o_accuracy >= 80 %}text-success{% elif bond_doc.gpt4o_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                    {{ bond_doc.gpt4o_accuracy }}%
                                </span>
                            </div>
                            {% endif %}
                            <pre style="white-space: pre-wrap; word-wrap: break-word; font-family: monospace; max-height: 500px; overflow-y: auto;">{{ bond_doc.gpt4o_result }}</pre>
                        {% elif bond_doc.gpt4o_status == 'failed' %}
                            <div class="alert alert-danger">
                                „Ç®„É©„Éº: GPT-4o„ÅÆËß£Êûê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü
                            </div>
                        {% else %}
                            <p class="text-muted">ÁµêÊûú„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- GPT-4-turboÁµêÊûú -->
            <div class="tab-pane fade" id="gpt35" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">GPT-4-turbo Ëß£ÊûêÁµêÊûú</h6>
                    </div>
                    <div class="card-body" style="background-color: #f8f9fa;">
                        {% if bond_doc.gpt35_result %}
                            <div class="mb-2">
                                <strong>ÊñáÂ≠óÊï∞:</strong> {{ bond_doc.gpt35_result|length }} ÊñáÂ≠ó
                            </div>
                            {% if bond_doc.gpt35_accuracy %}
                            <div class="mb-2">
                                <strong>ÈÅ©ÂêàÁéá:</strong> 
                                <span class="{% if bond_doc.gpt35_accuracy >= 80 %}text-success{% elif bond_doc.gpt35_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                    {{ bond_doc.gpt35_accuracy }}%
                                </span>
                            </div>
                            {% endif %}
                            <pre style="white-space: pre-wrap; word-wrap: break-word; font-family: monospace; max-height: 500px; overflow-y: auto;">{{ bond_doc.gpt35_result }}</pre>
                        {% elif bond_doc.gpt35_status == 'failed' %}
                            <div class="alert alert-danger">
                                „Ç®„É©„Éº: GPT-4-turbo„ÅÆËß£Êûê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü
                            </div>
                        {% else %}
                            <p class="text-muted">ÁµêÊûú„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- GeminiÁµêÊûú -->
            <div class="tab-pane fade" id="gemini" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">Gemini 2.0 Flash Exp Ëß£ÊûêÁµêÊûú</h6>
                    </div>
                    <div class="card-body" style="background-color: #f8f9fa;">
                        {% if bond_doc.gemini_result %}
                            <div class="mb-2">
                                <strong>ÊñáÂ≠óÊï∞:</strong> {{ bond_doc.gemini_result|length }} ÊñáÂ≠ó
                            </div>
                            {% if bond_doc.gemini_accuracy %}
                            <div class="mb-2">
                                <strong>ÈÅ©ÂêàÁéá:</strong> 
                                <span class="{% if bond_doc.gemini_accuracy >= 80 %}text-success{% elif bond_doc.gemini_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                    {{ bond_doc.gemini_accuracy }}%
                                </span>
                            </div>
                            {% endif %}
                            <pre style="white-space: pre-wrap; word-wrap: break-word; font-family: monospace; max-height: 500px; overflow-y: auto;">{{ bond_doc.gemini_result }}</pre>
                        {% elif bond_doc.gemini_status == 'failed' %}
                            <div class="alert alert-danger">
                                „Ç®„É©„Éº: {{ bond_doc.gemini_result }}
                            </div>
                        {% else %}
                            <p class="text-muted">ÁµêÊûú„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- ClaudeÁµêÊûú -->
            <div class="tab-pane fade" id="claude" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">Claude 3 Opus Ëß£ÊûêÁµêÊûú</h6>
                    </div>
                    <div class="card-body" style="background-color: #f8f9fa;">
                        {% if bond_doc.claude_result %}
                            <div class="mb-2">
                                <strong>ÊñáÂ≠óÊï∞:</strong> {{ bond_doc.claude_result|length }} ÊñáÂ≠ó
                            </div>
                            {% if bond_doc.claude_accuracy %}
                            <div class="mb-2">
                                <strong>ÈÅ©ÂêàÁéá:</strong> 
                                <span class="{% if bond_doc.claude_accuracy >= 80 %}text-success{% elif bond_doc.claude_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                    {{ bond_doc.claude_accuracy }}%
                                </span>
                            </div>
                            {% endif %}
                            <pre style="white-space: pre-wrap; word-wrap: break-word; font-family: monospace; max-height: 500px; overflow-y: auto;">{{ bond_doc.claude_result }}</pre>
                        {% elif bond_doc.claude_status == 'failed' %}
                            <div class="alert alert-danger">
                                „Ç®„É©„Éº: {{ bond_doc.claude_result }}
                            </div>
                        {% else %}
                            <p class="text-muted">ÁµêÊûú„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- ÊØîËºÉÂàÜÊûê -->
            <div class="tab-pane fade" id="comparison" role="tabpanel">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">Á≤æÂ∫¶ÊØîËºÉÂàÜÊûêÔºà5„Å§„ÅÆ„ÉÑ„Éº„É´/„É¢„Éá„É´Ôºâ</h6>
                    </div>
                    <div class="card-body">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>È†ÖÁõÆ</th>
                                    <th>{% if bond_doc.file_type == 'pdf' %}pdfplumber{% else %}Tesseract OCR{% endif %}</th>
                                    <th>GPT-4o</th>
                                    <th>GPT-4-turbo</th>
                                    <th>Gemini 2.0 Flash Exp</th>
                                    <th>Claude 3 Opus</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>„Çπ„ÉÜ„Éº„Çø„Çπ</strong></td>
                                    <td><span class="status-badge status-{{ bond_doc.ocr_status }}">{{ bond_doc.ocr_status }}</span></td>
                                    <td><span class="status-badge status-{{ bond_doc.gpt4o_status }}">{{ bond_doc.gpt4o_status }}</span></td>
                                    <td><span class="status-badge status-{{ bond_doc.gpt35_status }}">{{ bond_doc.gpt35_status }}</span></td>
                                    <td><span class="status-badge status-{{ bond_doc.gemini_status }}">{{ bond_doc.gemini_status }}</span></td>
                                    <td><span class="status-badge status-{{ bond_doc.claude_status }}">{{ bond_doc.claude_status }}</span></td>
                                </tr>
                                <tr>
                                    <td><strong>Âá¶ÁêÜÊôÇÈñì</strong></td>
                                    <td>{{ bond_doc.ocr_processing_time|floatformat:2|default:"-" }} Áßí</td>
                                    <td>{{ bond_doc.gpt4o_processing_time|floatformat:2|default:"-" }} Áßí</td>
                                    <td>{{ bond_doc.gpt35_processing_time|floatformat:2|default:"-" }} Áßí</td>
                                    <td>{{ bond_doc.gemini_processing_time|floatformat:2|default:"-" }} Áßí</td>
                                    <td>{{ bond_doc.claude_processing_time|floatformat:2|default:"-" }} Áßí</td>
                                </tr>
                                <tr>
                                    <td><strong>ÊäΩÂá∫ÊñáÂ≠óÊï∞</strong></td>
                                    <td>{{ bond_doc.ocr_result|length|default:"0" }} ÊñáÂ≠ó</td>
                                    <td>{{ bond_doc.gpt4o_result|length|default:"0" }} ÊñáÂ≠ó</td>
                                    <td>{{ bond_doc.gpt35_result|length|default:"0" }} ÊñáÂ≠ó</td>
                                    <td>{{ bond_doc.gemini_result|length|default:"0" }} ÊñáÂ≠ó</td>
                                    <td>{{ bond_doc.claude_result|length|default:"0" }} ÊñáÂ≠ó</td>
                                </tr>
                                {% if bond_doc.correct_text %}
                                <tr>
                                    <td><strong>ÈÅ©ÂêàÁéá</strong></td>
                                    <td>
                                        {% if bond_doc.ocr_accuracy %}
                                            <h5 class="mb-0 {% if bond_doc.ocr_accuracy >= 80 %}text-success{% elif bond_doc.ocr_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                                {{ bond_doc.ocr_accuracy }}%
                                            </h5>
                                        {% else %}
                                            <span class="text-muted">-</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if bond_doc.gpt4o_accuracy %}
                                            <h5 class="mb-0 {% if bond_doc.gpt4o_accuracy >= 80 %}text-success{% elif bond_doc.gpt4o_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                                {{ bond_doc.gpt4o_accuracy }}%
                                            </h5>
                                        {% else %}
                                            <span class="text-muted">-</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if bond_doc.gpt35_accuracy %}
                                            <h5 class="mb-0 {% if bond_doc.gpt35_accuracy >= 80 %}text-success{% elif bond_doc.gpt35_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                                {{ bond_doc.gpt35_accuracy }}%
                                            </h5>
                                        {% else %}
                                            <span class="text-muted">-</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if bond_doc.gemini_accuracy %}
                                            <h5 class="mb-0 {% if bond_doc.gemini_accuracy >= 80 %}text-success{% elif bond_doc.gemini_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                                {{ bond_doc.gemini_accuracy }}%
                                            </h5>
                                        {% else %}
                                            <span class="text-muted">-</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if bond_doc.claude_accuracy %}
                                            <h5 class="mb-0 {% if bond_doc.claude_accuracy >= 80 %}text-success{% elif bond_doc.claude_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                                {{ bond_doc.claude_accuracy }}%
                                            </h5>
                                        {% else %}
                                            <span class="text-muted">-</span>
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endif %}
                            </tbody>
                        </table>
                        
                        {% if bond_doc.correct_text %}
                        <div class="alert alert-success mt-3">
                            <h6>‚úÖ Ê≠£Ëß£„ÉÜ„Ç≠„Çπ„Éà„Å®ÊØîËºÉ„Åó„ÅüÈÅ©ÂêàÁéá</h6>
                            <div class="row mt-3">
                                <div class="col">
                                    <div class="text-center">
                                        <p class="mb-1"><strong>{% if bond_doc.file_type == 'pdf' %}pdfplumber{% else %}OCR{% endif %}</strong></p>
                                        {% if bond_doc.ocr_accuracy %}
                                            <h4 class="{% if bond_doc.ocr_accuracy >= 80 %}text-success{% elif bond_doc.ocr_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                                {{ bond_doc.ocr_accuracy }}%
                                            </h4>
                                        {% else %}
                                            <p class="text-muted">-</p>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="text-center">
                                        <p class="mb-1"><strong>GPT-4o</strong></p>
                                        {% if bond_doc.gpt4o_accuracy %}
                                            <h4 class="{% if bond_doc.gpt4o_accuracy >= 80 %}text-success{% elif bond_doc.gpt4o_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                                {{ bond_doc.gpt4o_accuracy }}%
                                            </h4>
                                        {% else %}
                                            <p class="text-muted">-</p>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="text-center">
                                        <p class="mb-1"><strong>GPT-4-turbo</strong></p>
                                        {% if bond_doc.gpt35_accuracy %}
                                            <h4 class="{% if bond_doc.gpt35_accuracy >= 80 %}text-success{% elif bond_doc.gpt35_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                                {{ bond_doc.gpt35_accuracy }}%
                                            </h4>
                                        {% else %}
                                            <p class="text-muted">-</p>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="text-center">
                                        <p class="mb-1"><strong>Gemini 2.0 Flash Exp</strong></p>
                                        {% if bond_doc.gemini_accuracy %}
                                            <h4 class="{% if bond_doc.gemini_accuracy >= 80 %}text-success{% elif bond_doc.gemini_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                                {{ bond_doc.gemini_accuracy }}%
                                            </h4>
                                        {% else %}
                                            <p class="text-muted">-</p>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="text-center">
                                        <p class="mb-1"><strong>Claude 3 Opus</strong></p>
                                        {% if bond_doc.claude_accuracy %}
                                            <h4 class="{% if bond_doc.claude_accuracy >= 80 %}text-success{% elif bond_doc.claude_accuracy >= 60 %}text-warning{% else %}text-danger{% endif %}">
                                                {{ bond_doc.claude_accuracy }}%
                                            </h4>
                                        {% else %}
                                            <p class="text-muted">-</p>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <p class="mb-0"><strong>Ê≠£Ëß£„ÉÜ„Ç≠„Çπ„Éà:</strong></p>
                            <pre style="white-space: pre-wrap; word-wrap: break-word; font-family: monospace; max-height: 150px; overflow-y: auto; background-color: white; padding: 10px; border-radius: 5px;">{{ bond_doc.correct_text }}</pre>
                        </div>
                        {% endif %}
                        
                        <div class="alert alert-info mt-3">
                            <h6>üí° Á≤æÂ∫¶Ë©ï‰æ°„ÅÆ„Éù„Ç§„É≥„Éà</h6>
                            <ul class="mb-0">
                                <li><strong>Âá¶ÁêÜÊôÇÈñì:</strong> „Çà„ÇäÁü≠„ÅÑÊñπ„ÅåÂäπÁéáÁöÑ</li>
                                <li><strong>ÈÅ©ÂêàÁéá:</strong> 80%‰ª•‰∏ä„ÅßËâØÂ•Ω„ÄÅ60%‰ª•‰∏ä„ÅßÊôÆÈÄö„ÄÅ60%Êú™Ê∫Ä„ÅßË¶ÅÊîπÂñÑ</li>
                                <li><strong>ÊßãÈÄ†Âåñ:</strong> ÁîüÊàêAI„ÅØÊÉÖÂ†±„ÇíÊï¥ÁêÜ„Åó„Å¶Âá∫Âäõ</li>
                                <li><strong>„Ç≥„Çπ„Éà:</strong> OCR„ÅØÁÑ°Êñô„ÄÅÁîüÊàêAI„ÅØAPI„Ç≥„Çπ„Éà„ÅåÁô∫Áîü</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {% elif bond_doc.analysis_status == 'failed' %}
    <div class="alert alert-danger mt-4">
        <h5>‚ùå „Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü</h5>
        <p class="mb-0">{{ bond_doc.error_message }}</p>
    </div>
    {% elif bond_doc.analysis_status == 'processing' %}
    <div class="alert alert-info mt-4">
        <h5>‚è≥ Âá¶ÁêÜ‰∏≠</h5>
        <p class="mb-0">„Éï„Ç°„Ç§„É´„ÇíËß£Êûê„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åó„Å∞„Çâ„Åè„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ...</p>
    </div>
    {% endif %}
</div>
{% endblock %}
